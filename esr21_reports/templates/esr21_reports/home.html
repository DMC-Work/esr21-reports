{% extends 'edc_base/base.html' %}

{% block extra-styles %}
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.css">
<style>
.row{
    margin-top:10px;
    padding: 0 10px;
}

.clickable{
    cursor: pointer;   
}

.panel-heading span {
	margin-top: -20px;
	font-size: 15px;
}

</style>
{% endblock extra-styles %}

{% block extra-scripts %}

	<script src="https://cdn.jsdelivr.net/npm/chart.js@3.0.2/dist/chart.min.js"></script>
	<script src="https://code.highcharts.com/highcharts.src.js"></script>
	<script src="https://code.jquery.com/jquery-3.3.1.min.js"></script>
	<script>
	  $.ajax({
	    url: $("#container").attr("data-url"),
	    dataType: 'json',
	    success: function (data) {
	      Highcharts.chart("container", data);
	    }
	  });
	</script>

{% endblock extra-scripts %}


{% block main %}


<div class="container">
	<div id="hh"></div>
	<div class="row">
		
			<div class="col-md-6">
				<div class="panel panel-info">
					<div class="panel-heading"><b>Screening numbers</b></div>
					<div class="panel-body">
						<table class="table table-hover">
						  <thead>
						    <tr>
						      <th></th>
						      <th colspan="5" class="text-center">Sites</th>
						      <th>Overall</th>
						    </tr>
						  </thead>
						  <tbody>
						  	<tr>
						        <td ></td>
						        <td>Gaborone</td>
						        <td>Maun</td>
						        <td>S/Phikwe</td>
						        <td>F/Town</td>
						        <td>Serowe</td>
						        <td>All Sites</td>
						    </tr>
						    <tr>
						      <td>Screened</td>
						      {% for site in site_screenings %}
						      	<td>{{ site.1 }}</td>
						      {% endfor %}
						      <td>{{ total_screenings }}</td>
						    </tr>
						    <tr>
						      <td>Erolled</td>
						      {% for site in site_vaccinations %}
						      	<td>{{ site.1 }}</td>
						      {% endfor %}
						      <td>{{ total_vaccinations }}</td>
						    </tr>
						    <tr>
						      <td>Not Enrolled</td>
						      {% for site in not_erolled %}
						      	<td>{{ site.1 }}</td>
						      {% endfor %}
						      <td>{{ total_not_erolled }}</td>
						    </tr>
						  </tbody>
						</table>
			      </div>
			    </div>
		    </div>
		    
		    <div class="col-md-6">
			    <div class="panel panel-info">
			      <div class="panel-heading"><b>Vaccination/Enrolment numbers</b></div>
			      <div class="panel-body">
			      	<table class="table table-hover">
					    <thead>
					      <tr>
					        <th></th>
					        <th colspan="5" class="text-center">Sites</th>
					        <th>Overall</th>
					      </tr>
					    </thead>
					    <tbody>
					    	<tr>
					          <td ></td>
					          <td>Gaborone</td>
					          <td>Maun</td>
					          <td>S/Phikwe</td>
					          <td>F/Town</td>
					          <td>Serowe</td>
					          <td>All-sites</td>
					      </tr>
					      <tr>
					        <td>First dose</td>
					        <td>1</td>
					        <td>1</td>
					        <td>1</td>
					        <td>1</td>
					        <td>1</td>
					        <td>3</td>
					      </tr>
					      <tr>
					        <td>Second dose</td>
					        <td>3</td>
					        <td>1</td>
					        <td>1</td>
					        <td>1</td>
					        <td>1</td>
					        <td>5</td>
					      </tr>
					    </tbody>
					  </table>
			      </div>
			    </div>
		    </div>

	</div>
	
	<div class="row">
		<div class="col-md-6">
			    <canvas id="screeningChart" width="250" height="150"></canvas>
			        <script>
			        var ctx = document.getElementById('screeningChart').getContext('2d');
			        var myChart = new Chart(ctx, {
			            type: 'bar',
			            data: {
			                labels: [{% for screening in site_screenings %}  '{{ screening.0 }}',  {% endfor %}],
			                datasets: [{
			                    label: 'Screenings per Sites',
			                    data: [{% for screening in site_screenings %}  {{ screening.1 }},  {% endfor %}],
			                    backgroundColor: [
			                        'rgba(255, 99, 132, 0.8)',
			                        'rgba(54, 162, 235, 0.8)',
			                        'rgba(255, 206, 86, 0.8)',
			                        'rgba(75, 192, 192, 0.8)',
			                        'rgba(153, 102, 255, 0.8)',
			                        'rgba(255, 159, 64, 0.8)',
			                        'rgba(240, 120, 50, 0.8)',
			                    ],
			                    borderColor: [
			                        'rgba(255, 99, 132, 1)',
			                        'rgba(54, 162, 235, 1)',
			                        'rgba(255, 206, 86, 1)',
			                        'rgba(75, 192, 192, 1)',
			                        'rgba(153, 102, 255, 1)',
			                        'rgba(255, 159, 64, 1)',
			                        'rgba(240, 120, 50, 1)',
			
			                    ],
			                    borderWidth: 2
			                }]
			            },
			            options: {
			                scales: {
			                    y: {
			                        beginAtZero: true
			                    }
			                }
			            }
			        });
			        </script>
			    </div>
		<div class="col-md-6">
			    <canvas id="myChart" width="250" height="150"></canvas>
			        <script>
			        var ctx = document.getElementById('myChart').getContext('2d');
			        var myChart = new Chart(ctx, {
			            type: 'bar',
			            data: {
			                labels: [{% for vaccine in site_vaccinations %}  '{{ vaccine.0 }}',  {% endfor %}],
			                datasets: [{
			                    label: 'Erolments per Sites',
			                    data: [{% for vaccine in site_vaccinations %}  {{ vaccine.1 }},  {% endfor %}],
			                    backgroundColor: [
			                        'rgba(255, 99, 132, 0.8)',
			                        'rgba(54, 162, 235, 0.8)',
			                        'rgba(255, 206, 86, 0.8)',
			                        'rgba(75, 192, 192, 0.8)',
			                        'rgba(153, 102, 255, 0.8)',
			                        'rgba(255, 159, 64, 0.8)',
			                        'rgba(240, 120, 50, 0.8)',
			                    ],
			                    borderColor: [
			                        'rgba(255, 99, 132, 1)',
			                        'rgba(54, 162, 235, 1)',
			                        'rgba(255, 206, 86, 1)',
			                        'rgba(75, 192, 192, 1)',
			                        'rgba(153, 102, 255, 1)',
			                        'rgba(255, 159, 64, 1)',
			                        'rgba(240, 120, 50, 1)',
			
			                    ],
			                    borderWidth: 2
			                }]
			            },
			            options: {
			                scales: {
			                    y: {
			                        beginAtZero: true
			                    }
			                }
			            }
			        });
			        </script>
			    </div>
	</div>

    <div class='row'>
		<div class="col-md-12">
			    <div class="panel panel-info">
			      <div class="panel-heading"><b>Withdrawals</b></div>
			      <div class="panel-body">
			      	<table class="table table-hover">
					    <thead>
					      <tr>
					        <th></th>
					        <th colspan="5" class="text-center">Sites</th>
					        <th>Overall</th>
					      </tr>
					    </thead>
					    <tbody>
					    	<tr>
					          <td ></td>
					          <td>Gaborone</td>
					          <td>Maun</td>
					          <td>S/Phikwe</td>
					          <td>F/Town</td>
					          <td>Serowe</td>
					          <td>All-sites</td>
					      </tr>
					      <tr>
					        <td>Total withdrawals</td>
					        <td>1</td>
					        <td>1</td>
					        <td>1</td>
					        <td>1</td>
					        <td>1</td>
					        <td>3</td>
					      </tr>
					      <tr>
					        <td>After Vax 1</td>
					        <td>3</td>
					        <td>1</td>
					        <td>1</td>
					        <td>1</td>
					        <td>1</td>
					        <td>5</td>
					      </tr>
					      <tr>
					        <td>After Vax 2</td>
					        <td>3</td>
					        <td>1</td>
					        <td>1</td>
					        <td>1</td>
					        <td>1</td>
					        <td>5</td>
					      </tr>
					      <tr>
					        <td>Reason for withdrawal</td>
					        <td>3</td>
					        <td>1</td>
					        <td>1</td>
					        <td>1</td>
					        <td>1</td>
					        <td>5</td>
					      </tr>
					    </tbody>
					  </table>
			      </div>
			    </div>
		    </div>    	
    </div>

 
</div>

{% endblock main %}